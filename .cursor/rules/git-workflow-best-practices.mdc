---
description: "Gitå·¥ä½œæµå’Œç‰ˆæœ¬ç®¡ç†æœ€ä½³å®è·µï¼ŒåŸºäºEZ Loggeré¡¹ç›®ç»éªŒ"
globs: "*.git*,CHANGELOG.md"
---

# Gitå·¥ä½œæµå’Œç‰ˆæœ¬ç®¡ç†æœ€ä½³å®è·µ

åŸºäºEZ Loggeré¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­çš„ç»éªŒæ•™è®­ã€‚

## ğŸŒ¿ åˆ†æ”¯ç®¡ç†ç­–ç•¥

### ä¸»åˆ†æ”¯ä¿æŠ¤
```bash
# masteråˆ†æ”¯å§‹ç»ˆä¿æŒç¨³å®šå¯å‘å¸ƒçŠ¶æ€
# æ‰€æœ‰åŠŸèƒ½å¼€å‘éƒ½åœ¨ç‰¹æ€§åˆ†æ”¯è¿›è¡Œ

# âœ… æ­£ç¡®çš„å·¥ä½œæµ
git checkout -b feature/unity-package-fixes  # åˆ›å»ºç‰¹æ€§åˆ†æ”¯
# å¼€å‘å·¥ä½œ...
git checkout master                          # åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯
git merge feature/unity-package-fixes       # åˆå¹¶ç‰¹æ€§åˆ†æ”¯
git branch -d feature/unity-package-fixes   # åˆ é™¤å·²åˆå¹¶åˆ†æ”¯
```

### åˆ†æ”¯å‘½åè§„èŒƒ
```
feature/åŠŸèƒ½æè¿°      # æ–°åŠŸèƒ½å¼€å‘
fix/é—®é¢˜æè¿°         # é—®é¢˜ä¿®å¤  
hotfix/ç´§æ€¥ä¿®å¤     # ç´§æ€¥ä¿®å¤
release/ç‰ˆæœ¬å·      # ç‰ˆæœ¬å‘å¸ƒå‡†å¤‡
```

## ğŸ“… ç‰ˆæœ¬å·å’Œæ—¥æœŸç®¡ç†

### ç‰ˆæœ¬å·è§„èŒƒ (Semantic Versioning)
```
ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·

1.0.0 -> 1.0.1  # ä¿®å¤bug
1.0.1 -> 1.1.0  # æ–°å¢åŠŸèƒ½
1.1.0 -> 2.0.0  # ç ´åæ€§å˜æ›´
```

### æ—¥æœŸæ ¼å¼æ ‡å‡†åŒ–
```bash
# âŒ é”™è¯¯çš„æ—¥æœŸå¤„ç†
echo "## [1.0.1] - 2024-12-28"  # ç¡¬ç¼–ç é”™è¯¯æ—¥æœŸ

# âœ… æ­£ç¡®çš„æ—¥æœŸå¤„ç†  
current_date=$(date +%Y-%m-%d)
echo "## [1.0.1] - $current_date"

# ç¤ºä¾‹è¾“å‡º: ## [1.0.1] - 2025-08-08
```

### CHANGELOG.md ç®¡ç†
```markdown
# æ›´æ–°æ—¥å¿—

## [1.0.4] - 2025-08-08

### ä¿®å¤
- ğŸ”§ ç¡®ä¿æ‰€æœ‰å¿…è¦çš„.metaæ–‡ä»¶åŒ…å«åœ¨Unity Packageä¸­
- ğŸ“‹ åœ¨package.jsonçš„fileså­—æ®µä¸­æ˜ç¡®æŒ‡å®š.metaæ–‡ä»¶

### æ”¹è¿›  
- âœ… Unity Packageç°åœ¨åŒ…å«æ‰€æœ‰å¿…è¦çš„å…ƒæ•°æ®æ–‡ä»¶
- ğŸ¯ å®Œå…¨ç¬¦åˆUnity Packageè§„èŒƒ

## [1.0.3] - 2025-08-08
...
```

## ğŸ·ï¸ Gitæ ‡ç­¾ç®¡ç†

### æ ‡ç­¾åˆ›å»ºè§„èŒƒ
```bash
# åˆ›å»ºå¸¦æ³¨é‡Šçš„æ ‡ç­¾ (æ¨è)
git tag -a "v1.0.4" -m "EZ Logger v1.0.4 - ä¿®å¤Unity Packageä¸­.metaæ–‡ä»¶ç¼ºå¤±é—®é¢˜"

# æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹
git push origin v1.0.4

# æ¨é€æ‰€æœ‰æ ‡ç­¾
git push origin --tags
```

### æ ‡ç­¾å‘½åçº¦å®š
```
v1.0.0    # å‘å¸ƒç‰ˆæœ¬æ ‡ç­¾
v1.0.0-rc1  # å€™é€‰ç‰ˆæœ¬
v1.0.0-beta1  # æµ‹è¯•ç‰ˆæœ¬
v1.0.0-alpha1  # å†…æµ‹ç‰ˆæœ¬
```

## ğŸ—‚ï¸ æ–‡ä»¶ç®¡ç†ç­–ç•¥

### .gitignore åˆ†å±‚ç®¡ç†
```bash
# å…¨å±€å¿½ç•¥ (æ“ä½œç³»ç»Ÿçº§åˆ«)
.DS_Store
Thumbs.db

# é¡¹ç›®å¿½ç•¥ (Unityé¡¹ç›®çº§åˆ«)  
Library/
Temp/
Logs/

# åŒ…å¼€å‘å¿½ç•¥ (Unity Packageçº§åˆ«)
DevTools/
Build/
package-build.json
```

### .gitattributes å¯¼å‡ºæ§åˆ¶
```bash
# Unity Package Manager exportæ§åˆ¶
DevTools/ export-ignore
Build/ export-ignore  
.cursor/ export-ignore
package-build.json export-ignore
.gitignore export-ignore
.gitattributes export-ignore
```

## ğŸ”„ æäº¤å·¥ä½œæµ

### æäº¤ä¿¡æ¯è§„èŒƒ
```bash
# æ ¼å¼: <type>(<scope>): <description>
# ç±»å‹: feat, fix, docs, style, refactor, test, chore

git commit -m "feat(unity): æ·»åŠ Unity LogTypeå¯¹é½æ”¯æŒ"
git commit -m "fix(package): ä¿®å¤.metaæ–‡ä»¶ç¼ºå¤±è­¦å‘Š"  
git commit -m "docs(readme): æ›´æ–°å®‰è£…è¯´æ˜"
git commit -m "chore(build): ç§»é™¤æ„å»ºé…ç½®æ–‡ä»¶"
```

### æäº¤å‰æ£€æŸ¥æ¸…å•
```bash
#!/bin/bash
# pre-commit-check.sh

echo "ğŸ” æäº¤å‰æ£€æŸ¥..."

# 1. æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®åˆ†æ”¯
current_branch=$(git branch --show-current)
if [ "$current_branch" = "master" ]; then
    echo "âš ï¸  è­¦å‘Š: ç›´æ¥åœ¨masteråˆ†æ”¯æäº¤ï¼Œå»ºè®®ä½¿ç”¨ç‰¹æ€§åˆ†æ”¯"
fi

# 2. æ£€æŸ¥æš‚å­˜åŒºçŠ¶æ€
if [ -z "$(git diff --cached --name-only)" ]; then
    echo "âŒ æ²¡æœ‰æ–‡ä»¶è¢«æš‚å­˜ï¼Œè¯·å…ˆ git add"
    exit 1
fi

# 3. æ£€æŸ¥Unity Packageç›¸å…³æ–‡ä»¶
if git diff --cached --name-only | grep -q "package.json"; then
    echo "ğŸ“¦ æ£€æµ‹åˆ°package.jsonæ›´æ”¹ï¼Œè¯·ç¡®è®¤ç‰ˆæœ¬å·æ­£ç¡®"
fi

# 4. æ£€æŸ¥CHANGELOG.mdæ—¥æœŸ
if git diff --cached --name-only | grep -q "CHANGELOG.md"; then
    today=$(date +%Y-%m-%d)
    if ! grep -q "$today" CHANGELOG.md; then
        echo "ğŸ“… è­¦å‘Š: CHANGELOG.mdå¯èƒ½åŒ…å«é”™è¯¯æ—¥æœŸï¼Œä»Šå¤©æ˜¯: $today"
    fi
fi

echo "âœ… æ£€æŸ¥å®Œæˆ"
```

## ğŸš€ å‘å¸ƒå·¥ä½œæµ

### ç‰ˆæœ¬å‘å¸ƒæµç¨‹
```bash
#!/bin/bash
# release.sh

VERSION=$1
if [ -z "$VERSION" ]; then
    echo "ç”¨æ³•: ./release.sh 1.0.4"
    exit 1
fi

echo "ğŸš€ å‘å¸ƒ EZ Logger v$VERSION"

# 1. ç¡®ä¿åœ¨masteråˆ†æ”¯
git checkout master
git pull origin master

# 2. æ›´æ–°ç‰ˆæœ¬æ–‡ä»¶
today=$(date +%Y-%m-%d)
sed -i "s/\"version\": \".*\"/\"version\": \"$VERSION\"/" package.json

# 3. æ›´æ–°CHANGELOG.md (æ‰‹åŠ¨ç¼–è¾‘åè¿è¡Œ)
echo "ğŸ“ è¯·æ‰‹åŠ¨æ›´æ–°CHANGELOG.mdï¼Œç„¶åæŒ‰Enterç»§ç»­..."
read

# 4. æäº¤ç‰ˆæœ¬æ›´æ”¹
git add package.json CHANGELOG.md
git commit -m "ğŸš€ v$VERSION: ç‰ˆæœ¬å‘å¸ƒ"

# 5. åˆ›å»ºæ ‡ç­¾
git tag -a "v$VERSION" -m "EZ Logger v$VERSION"

# 6. æ¨é€åˆ°è¿œç¨‹
git push origin master
git push origin "v$VERSION"

echo "âœ… v$VERSION å‘å¸ƒå®Œæˆ!"
echo "ğŸ”— GitHub: https://github.com/summer198971/EZLogger.git"
echo "ğŸ“¦ Unity Package Manager: https://github.com/summer198971/EZLogger.git#v$VERSION"
```

## ğŸ” é—®é¢˜æ’æŸ¥

### å¸¸è§Gité—®é¢˜

#### 1. è¯¯æäº¤åˆ°é”™è¯¯åˆ†æ”¯
```bash
# æ’¤é”€æœ€è¿‘çš„æäº¤ä½†ä¿ç•™æ›´æ”¹
git reset --soft HEAD~1

# åˆ‡æ¢åˆ°æ­£ç¡®åˆ†æ”¯
git checkout correct-branch
git commit -m "æ­£ç¡®çš„æäº¤ä¿¡æ¯"
```

#### 2. æ ‡ç­¾åˆ›å»ºé”™è¯¯
```bash
# åˆ é™¤æœ¬åœ°æ ‡ç­¾
git tag -d v1.0.4

# åˆ é™¤è¿œç¨‹æ ‡ç­¾
git push origin :refs/tags/v1.0.4

# é‡æ–°åˆ›å»ºæ­£ç¡®æ ‡ç­¾
git tag -a "v1.0.4" -m "æ­£ç¡®çš„æ ‡ç­¾ä¿¡æ¯"
git push origin v1.0.4
```

#### 3. åˆå¹¶å†²çªå¤„ç†
```bash
# æŸ¥çœ‹å†²çªæ–‡ä»¶
git status

# æ‰‹åŠ¨è§£å†³å†²çªå
git add .
git commit -m "è§£å†³åˆå¹¶å†²çª"
```

## ğŸ“‹ æ¯æ—¥æ£€æŸ¥æ¸…å•

### å¼€å‘å¼€å§‹å‰:
- [ ] `git status` - æ£€æŸ¥å·¥ä½œåŒºçŠ¶æ€
- [ ] `git branch` - ç¡®è®¤å½“å‰åˆ†æ”¯
- [ ] `git pull origin master` - åŒæ­¥æœ€æ–°ä»£ç 

### å¼€å‘å®Œæˆå:
- [ ] è¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸
- [ ] æ£€æŸ¥CHANGELOG.mdæ—¥æœŸæ˜¯å¦æ­£ç¡®
- [ ] ç¡®è®¤package.jsonç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] æäº¤ä¿¡æ¯éµå¾ªè§„èŒƒ
- [ ] æ¨é€å‰åˆ›å»ºpull request (å¦‚æœä½¿ç”¨)

### ç‰ˆæœ¬å‘å¸ƒå‰:
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] CHANGELOG.mdåŒ…å«å½“å‰ç‰ˆæœ¬ä¿¡æ¯
- [ ] package.jsonç‰ˆæœ¬å·æ­£ç¡®
- [ ] Gitæ ‡ç­¾éµå¾ªå‘½åè§„èŒƒ
- [ ] åœ¨å¹²å‡€Unityé¡¹ç›®ä¸­æµ‹è¯•å®‰è£…

è¿™äº›è§„åˆ™å°†å¸®åŠ©é¿å…é‡å¤çŠ¯é”™ï¼Œä¿æŒé¡¹ç›®çš„è´¨é‡å’Œä¸€è‡´æ€§ã€‚