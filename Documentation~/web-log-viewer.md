# EZ Logger Web日志查看器使用指南

## 🎯 概述

EZ Logger Web日志查看器是一个现代化的日志分析工具，让你能够在任何支持现代Web标准的浏览器中查看和分析Unity游戏的日志文件。

**🚀 零配置使用**: 无需安装任何软件或启动服务器，直接双击HTML文件即可使用！

![Web Log Viewer Interface](images/web-log-viewer-interface.png)

## ✨ 核心功能

### 🎨 现代化界面
- **清洁简约**: 现代化的扁平设计，专注于内容展示
- **颜色编码**: 不同日志级别使用不同颜色，一目了然
  - 🔵 Log: 蓝色
  - 🟡 Warning: 橙色  
  - 🔴 Error: 红色
  - 🟣 Assert: 紫色
  - ⚫ Exception: 黑色
- **响应式布局**: 自适应不同屏幕尺寸，支持移动设备

### 🔍 强大的搜索与过滤
- **实时搜索**: 输入关键词即时高亮匹配内容
- **级别过滤**: 按Log/Warning/Error等级别筛选
- **模块过滤**: 按游戏模块（系统、网络、AI等）筛选，支持自动完成
- **类型筛选**: 区分网络日志和普通业务日志
- **搜索导航**: 使用"上一个"/"下一个"按钮在匹配项间跳转

### 📊 智能数据分析
- **会话识别**: 自动识别游戏启动会话，分离不同次运行的日志
- **统计面板**: 显示总日志数、错误数、网络请求数等关键指标
- **时间轴**: 按时间顺序查看事件发生情况，精确到毫秒

### 🛠️ 开发者友好工具
- **堆栈跟踪**: 展开查看错误的完整调用栈
- **多行内容**: 支持JSON、网络数据等复杂内容的折叠显示
- **导出功能**: 将筛选结果导出为新的日志文件
- **虚拟滚动**: 支持数万条日志的流畅浏览

## 🚀 快速开始

### 1. 准备日志文件

确保你的Unity项目已配置EZ Logger的文件输出器：

**方法1: 图形化配置（推荐）**
```
Edit → Project Settings → EZ Logger → File Appender → Enable
```

**方法2: 代码配置**
```csharp
// 在游戏启动时添加文件输出器
EZLog.AddAppender(new FileAppender("logs/game.log"));
```

### 2. 打开Web查看器

**直接打开HTML文件（推荐）**
```
方法1: 双击项目中的 Web/logread.html 文件
方法2: 在浏览器中按 Ctrl+O，选择 logread.html 文件
方法3: 拖拽 logread.html 文件到浏览器窗口
```

**可选：启动Web服务器（团队共享时使用）**
```bash
# 仅在需要远程访问或团队共享时使用
cd YourProject/Web
python -m http.server 8080
# 然后访问: http://localhost:8080/logread.html
```

### 3. 加载日志文件

- **方法1**: 点击"选择日志文件"按钮，选择Unity生成的.txt日志文件
- **方法2**: 直接将日志文件拖拽到页面上

> 💡 **提示**: 本地文件访问模式下，浏览器会记住上次选择的文件夹位置，下次使用更方便！

## 📊 界面详解

### 信息面板

顶部的信息面板显示当前日志的关键统计：

| 指标 | 说明 |
|------|------|
| 当前日志 | 显示当前查看的日志总条数 |
| 文件日志 | 来源文件的日志条数 |
| 文件大小 | 日志文件的大小 |
| 网络日志 | 网络相关日志的数量 |
| 错误日志 | Error和Exception级别的日志数量 |
| 会话信息 | 当前会话和总会话数 |

### 筛选控制面板

| 控件 | 功能 | 使用说明 |
|------|------|----------|
| 类型筛选 | 网络&&普通 / 网络日志 / 普通日志 | 按日志来源分类 |
| 级别筛选 | All / Log / Warning / Error | 按重要性级别过滤 |
| 模块筛选 | 文本输入框 | 支持自动完成，可输入模块名 |
| 内容搜索 | 文本输入框 | 在日志内容中搜索关键词 |
| 仅显示搜索内容 | 复选框 | 只显示包含搜索词的日志 |
| 默认全展开 | 复选框 | 默认展开所有可折叠内容 |

### 日志表格

| 列名 | 宽度 | 说明 |
|------|------|------|
| # | 50px | 日志在当前筛选结果中的序号 |
| 时间 | 85px | 日志产生的精确时间（HH:mm:ss.fff）|
| 帧 | 40px | Unity帧号，用于性能分析 |
| 类型 | 60px | 日志级别，带颜色标识 |
| 模块 | 150px | 产生日志的游戏模块或系统 |
| 操作 | 40px | 展开/收起按钮（仅多行内容） |
| 内容 | 自适应 | 日志的具体内容，支持高亮搜索 |

## 🔥 高级功能

### 会话管理

Web查看器能智能识别不同的游戏运行会话：

- **自动检测**: 每次`[FileAppender] Log started`都标记新会话开始
- **会话切换**: 使用顶部下拉菜单切换查看不同会话
- **独立分析**: 每个会话独立统计和筛选
- **会话信息**: 显示每个会话的开始时间和日志数量

### 搜索与导航

强大的搜索功能帮助快速定位问题：

- **实时高亮**: 输入搜索词立即高亮所有匹配项
- **匹配计数**: 显示"当前位置/总匹配数"
- **快速导航**: 
  - "上一个"按钮: 跳转到上一个匹配项
  - "下一个"按钮: 跳转到下一个匹配项
- **智能定位**: 自动滚动到匹配项并居中显示

### 内容展开与折叠

对于复杂的日志内容，提供智能的展开/折叠功能：

**网络日志**: 
- 折叠时显示请求类型和简要信息
- 展开时显示完整的JSON数据或协议内容

**堆栈跟踪**:
- 自动识别多行堆栈信息
- 折叠时显示异常类型和第一行
- 展开时显示完整调用栈

**多行内容**:
- 超过3行的内容自动折叠
- 长文本截断并显示省略号
- 一键展开查看完整内容

### 导出功能

将分析结果导出为标准日志文件：

- **保持格式**: 导出的文件保持EZ Logger的标准格式
- **筛选记录**: 包含当前的筛选条件信息
- **元数据**: 添加导出时间和条件说明
- **文件命名**: 自动生成包含会话和筛选信息的文件名

示例导出文件名: `game_session2_Error_filtered.txt`

## ⚡ 性能优化

### 虚拟滚动技术

Web查看器采用先进的虚拟滚动技术：

- **按需渲染**: 只渲染可见区域的日志条目
- **内存优化**: 自动回收不可见元素，保持内存稳定
- **流畅体验**: 支持数万条日志的实时查看
- **智能缓冲**: 预加载临近内容，确保滚动流畅

### 大文件处理

针对大型日志文件的优化：

- **渐进式加载**: 分批解析大文件，避免浏览器卡顿
- **进度反馈**: 实时显示文件加载和解析进度
- **异步处理**: 使用Web Workers进行后台处理
- **内存管理**: 智能内存回收，支持GB级别的日志文件

## 🎯 最佳实践

### 开发阶段

1. **合理设置日志级别**: 开发时使用Log级别，发布时使用Warning以上
2. **模块化日志**: 为不同游戏系统使用不同的模块标识
3. **结构化信息**: 对于复杂数据，使用JSON格式记录

### 调试技巧

1. **组合筛选**: 先按模块过滤，再按级别筛选，最后搜索关键词
2. **时间轴分析**: 通过时间戳分析事件发生的先后顺序
3. **会话对比**: 对比不同会话的日志，发现规律和异常
4. **错误跟踪**: 使用Error筛选快速定位所有问题

### 团队协作

1. **标准化日志**: 团队统一日志格式和模块命名
2. **问题报告**: 使用导出功能分享特定问题的日志
3. **文档化**: 为关键模块的日志格式编写说明文档

## 🐛 故障排除

### 常见问题

**Q: 日志文件无法加载？**
```
检查清单:
□ 文件格式是否为.txt
□ 文件是否为EZ Logger生成的标准格式
□ 文件路径是否正确
□ 浏览器是否支持文件读取API
```

**A: 确保使用现代浏览器，检查控制台是否有错误信息**

**Q: 搜索结果不准确？**
```
可能原因:
- 搜索区分大小写
- 包含特殊字符
- 正在搜索折叠的内容
```

**A: 尝试不同的关键词，使用"默认全展开"选项**

**Q: 页面加载缓慢？**
```
优化建议:
- 使用Chrome等现代浏览器
- 关闭不必要的浏览器标签
- 检查文件大小（>100MB需要耐心等待）
- 尝试筛选后再导出小文件分析
```

**Q: 浏览器无法打开HTML文件？**
```
解决步骤:
1. 确认使用现代浏览器（Chrome/Firefox/Safari/Edge）
2. 右键logread.html → "打开方式" → 选择浏览器
3. 检查文件路径中是否含有中文或特殊字符
4. 尝试将整个Web文件夹复制到桌面再打开
```

### 浏览器兼容性

| 浏览器 | 最低版本 | 建议版本 | 状态 |
|--------|----------|----------|------|
| Chrome | 80+ | 最新版 | ✅ 完全支持 |
| Firefox | 75+ | 最新版 | ✅ 完全支持 |
| Safari | 13+ | 最新版 | ✅ 完全支持 |
| Edge | 80+ | 最新版 | ✅ 完全支持 |
| IE | - | - | ❌ 不支持 |

### 性能建议

| 文件大小 | 建议处理方式 | 预期性能 |
|----------|--------------|----------|
| < 10MB | 直接加载 | 秒级响应 |
| 10-50MB | 耐心等待 | 10-30秒加载 |
| 50-100MB | 考虑分割 | 30-60秒加载 |
| > 100MB | 强烈建议先筛选导出 | 可能需要几分钟 |

## 🔧 开发者扩展

Web查看器使用纯JavaScript开发，支持定制扩展：

### 文件结构
```
Web/
├── logread.html      # 主界面HTML
├── log-parser.js     # 日志解析器
└── log_sample.txt    # 示例日志文件
```

### 自定义主题

修改CSS变量来定制主题：

```css
:root {
  --log-color: #2196F3;
  --warning-color: #FF9800;  
  --error-color: #F44336;
  --background-color: #ffffff;
  --text-color: #333333;
}
```

### 添加新的筛选器

在`log-parser.js`中扩展筛选逻辑：

```javascript
// 添加自定义筛选器
filterLogs() {
  // 现有筛选逻辑...
  
  // 添加自定义筛选
  if (customFilter) {
    filteredLogs = filteredLogs.filter(log => 
      // 自定义筛选条件
    );
  }
}
```

### 集成自定义分析

可以添加自定义的统计和分析功能：

```javascript
// 自定义分析函数
function analyzeCustomMetrics(logs) {
  // 实现自定义分析逻辑
  return {
    customMetric1: value1,
    customMetric2: value2
  };
}
```

## 📞 获取帮助

- 📚 **文档**: 查看项目README和其他文档文件
- 🐛 **问题报告**: 在GitHub Issues中提交bug报告
- 💡 **功能建议**: 通过GitHub Issues提出新功能建议
- 📧 **技术支持**: 发送邮件至 dev@ezgame.com

---

> 🚀 **提示**: Web日志查看器是EZ Logger的重要特性之一，结合Unity编辑器中的实时日志查看，为你提供完整的日志解决方案！
